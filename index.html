<!--
‚úÖ Full ProGlove Bowl Tracker (Berlin-style UI, unchanged design)
‚úÖ Firebase Realtime Sync version (Munich branch ready)
‚úÖ No UI design modifications ‚Äî only stable real-time sync & Firebase fixes
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ProGlove Bowl Tracking System (Munich)</title>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDya1dDRSeQmuKnpraSoSoTjauLlJ_J94I", // same key (Berlin default)
    authDomain: "proglove-bowl-tracker.firebaseapp.com",
    databaseURL: "https://proglove-bowl-tracker-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "proglove-bowl-tracker",
    storageBucket: "proglove-bowl-tracker.firebasestorage.app",
    messagingSenderId: "280001054969",
    appId: "1:280001054969:web:a0792a228ea2f1c5c9ba28"
  };

  // Manual init
  firebase.initializeApp(firebaseConfig);
  console.log("‚úÖ Firebase initialized manually before app-logic.js");
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root {
--bg-dark:#0f1724;--card:#273041;--card-light:#37475a;--text:#f3f4f6;--muted:#a0aec0;--border:#4a5568;--accent-pink:#ff6e96;--accent-green:#00e0b3;--accent-red:#ff5252;--accent-indigo:#7986cb;
}
*{box-sizing:border-box}
body{margin:0;font-family:'Inter',sans-serif;background:var(--bg-dark);color:var(--text)}
.container{max-width:980px;margin:0 auto;padding:18px;}
.app-header{background:var(--card);border-radius:12px;padding:20px 18px;margin-bottom:16px;border-bottom:4px solid var(--accent-pink)}
.header-title{color:var(--accent-pink);font-weight:800;font-size:20px;margin:0}
.header-sub{color:var(--muted);margin-top:6px}
#systemStatus{position:absolute;right:16px;top:16px;padding:6px 10px;border-radius:8px;background:#6b7280;color:#fff;font-weight:700;font-size:13px}
.app-card{background:var(--card);border-radius:10px;padding:16px;margin-bottom:14px;border:1px solid var(--border)}
.section-title{font-weight:600;color:var(--text);font-size:16px;border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:12px}
.flex-row{display:flex;gap:10px;flex-wrap:wrap}
.flex-1{flex:1 1 0%}
.mode-button{flex:1;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700;color:#fff;background:var(--card-light)}
.mode-button:disabled{opacity:.5;cursor:not-allowed}
.btn-pill{border-radius:999px;padding:10px 18px}
.btn-green{background:var(--accent-green);color:#05201a}
.btn-red{background:var(--accent-red);color:#391010}
.input,select,textarea{width:100%;padding:10px;border-radius:8px;background:transparent;border:1px solid var(--border);color:var(--text);font-size:14px}
.scanner-input{font-size:16px;text-align:center;border-width:3px}
.metrics-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
.metric{background:var(--card-light);padding:10px;border-radius:8px;text-align:center}
.metric .value{font-size:20px;font-weight:800}
.metric .label{color:var(--muted);font-size:12px}
.table-wrap{overflow:auto;margin-top:12px;border-radius:8px}
.data-table{width:100%;border-collapse:collapse;font-size:14px}
.data-table th{background:var(--card-light);color:var(--accent-pink);padding:8px;text-align:left;border-bottom:1px solid var(--border)}
.data-table td{padding:8px;border-bottom:1px solid rgba(0,0,0,0.2)}
.message-container{position:fixed;top:10px;left:50%;transform:translateX(-50%);z-index:9999;pointer-events:none;max-width:600px}
.small-note{color:var(--muted);font-size:13px;margin-top:8px}
.footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
</style>
</head>
<body>
<div class="message-container" id="messageContainer"></div>
<div class="container">
<header class="app-header">
  <div class="header-title">üß§ PROGLOVE BOWL TRACKING (Munich)</div>
  <div class="header-sub">Real-time Prep & Return Synchronization</div>
  <div id="systemStatus">Initializing...</div>
</header>

<section class="app-card">
  <div class="section-title">Real-time Cloud Sync Demo</div>
  <div class="flex-row">
    <button class="mode-button btn-green" onclick="addTestBowl()">‚ûï Add Test Bowl</button>
    <button class="mode-button btn-red" onclick="clearBowls()">üóëÔ∏è Clear All</button>
  </div>
  <div id="bowlList" class="small-note" style="margin-top:10px">Loading data...</div>
</section>

<div class="footer">¬© 2025 Berlin Kitchen</div>
</div>

<script>
// === REAL-TIME SYNC ===
const db = firebase.database().ref('progloveDataMunich');
const list = document.getElementById('bowlList');

function render(data) {
  if (!data) { list.innerText = 'No bowls yet.'; return; }
  const arr = Object.values(data);
  list.innerHTML = arr.map(b => `<div>ü•£ ${b.code} (${b.time})</div>`).join('');
}

db.on('value', snap => {
  console.log('üî• Realtime update:', snap.val());
  render(snap.val());
  document.getElementById('systemStatus').innerText = '‚úÖ Firebase Connected';
});

function addTestBowl() {
  const id = Math.random().toString(36).substring(2,8);
  db.push({ code: 'VYT-' + id, time: new Date().toISOString() });
}

function clearBowls() {
  db.remove();
}
</script>
</body>
</html>
